<!DOCTYPE html>
{% load static %} 
<html>
    <head>
           <title>Ecom</title>
           <link rel="stylesheet" type="text/css" href="{% static '/css/main.css' %}?{% now "U" %}">
           <!-- <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}" > -->
           <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
            <script src="https://kit.fontawesome.com/9d7ad848fe.js" crossorigin="anonymous"></script>


           <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1" />

           <!-- CSS -->

           <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
           rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
           crossorigin="anonymous">

           <script type="text/javascript">
             var user = '{{request.user}}'

             function getToken(name) {
              var cookieValue = null;
              if (document.cookie && document.cookie !== '') {
                  var cookies = document.cookie.split(';');
                  for (var i = 0; i < cookies.length; i++) {
                      var cookie = cookies[i].trim();
                      // Does this cookie string begin with the name we want?
                      if (cookie.substring(0, name.length + 1) === (name + '=')) {
                          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                          break;
                      }
                  }
              }
              return cookieValue;
		        }
		        var csrftoken = getToken('csrftoken')

            function getCookie(name) {
              // Split cookie string and get all individual name=value pairs in an array
              var cookieArr = document.cookie.split(";");

              // Loop through the array elements
              for(var i = 0; i < cookieArr.length; i++) {
                var cookiePair = cookieArr[i].split("=");

                /* Removing whitespace at the beginning of the cookie name
                and compare it with the given string */
                if(name == cookiePair[0].trim()) {
                    // Decode the cookie value and return
                    return decodeURIComponent(cookiePair[1]);
                }
              }
              // Return null if not found
              return null;
		        }

		        var cart = JSON.parse(getCookie('cart'))

            if(cart == undefined){
              cart = {}
              console.log('Cart was created!')
              document.cookie = 'cart=' + JSON.stringify(cart) + ";domain=;path=/"
            }

            console.log('Cart:', cart)

           </script>



     </head>
<body>

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="{% url 'store' %}">Little things</a>
    <!--<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>n -->

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="{% url 'store' %}">store <span class="sr-only"></span></a>
        </li>
      </ul>
    </div>
      <div class="shopping-cart">
        <div class="form-inline my-2 my-lg-0">
          <a href="#"class="btn btn-warning">Login</a> 
                   
               <a href="{% url 'cart' %}">
                   <img  id="cart-icon" src="{% static 'images/cart.png' %}">
                 </a>
                 <p id="cart-total">{{cartItems}}</p>
        </div>
      </div>
      <!--
        <div class="form-inline my-2 my-lg-0">
          <a href="#"class="btn btn-warning">Login</a>
                  
              <a href="{% url 'cart' %}">
                  <img  id="cart-icon" src="{% static 'images/cart.png' %}">
                </a>
                <p id="cart-total">{{cartItems}}</p>
      </div>
  -->
  </nav>
 
  
  

  
        <div class="container"> 
            {% block content%}

            {% endblock content%}
        </div>

    <!--footer-->
    
    <!-- Footer -->
    <div class="footer">
      <div class="container">
          <div class="row">
              <div class="footer__col2">
                  <div class="logo1">
                      <h1>Little meaningful things</h1>
                  </div>
                  <p> Contact us</p>
                  <div class="info__img--container">
                    <a href="https://www.instagram.com/james_kq/?r=nametag" class="instagram__icon" target="blank"><i class="fab fa-instagram"></i></a>  
                    <a href="https://www.snapchat.com/add/jamesmk002"  class="instagram__icon" target="blank"><i class="fab fa-snapchat"></i></a> 
                    <a href="//twitter.com/James91732820" class="instagram__icon" target="blank"><i class="fab fa-twitter"></i></a>      
                    <a href="https://www.youtube.com/channel/UCi7AbTPiQxfaOUV70NjisBA"  class="instagram__icon" target="blank"><i class="fab fa-youtube"></i></a>      

                    
                </div>
               
              </div>
              
            <div class="footer__col4">
                <h3>Follow on</h3>
                    <a href="https://www.snapchat.com/add/jamesmk002">Snapchat</a>
                    <a href="//twitter.com/James91732820" >Twitter</a>
                    <a href="https://www.instagram.com/james_kq/?r=nametag" >Instagram</a>
                    <a href="contact.html">Email</a>
                    <a href="https://www.youtube.com/channel/UCi7AbTPiQxfaOUV70NjisBA" >Youtube</a>
            </div>
          </div>
          <hr>
          <p class="copyright" >copyright 2022  - eccomerce website</p>
      </div>
  </div>

     <!-- JavaScript Bundle with Popper -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
     integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" 
     crossorigin="anonymous">
      </script>

 
     <script 
     src="https://code.jquery.com/jquery-3.4.1.slim.min.js" 
     integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" 
     crossorigin="anonymous">
     </script>
 
     <sript 
     src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" 
     integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
     crossorigin="anonymous">
     </script>
 
     <scdript 
     src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" 
     integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" 
     crossorigin="anonymous">
     </script>

     <script type="text/javascript" src="{% static 'js/cart1.js' %}"></script> 
    
 
     

</body>
</html>
